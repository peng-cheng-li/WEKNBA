"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r,e,n=require("react");(e=r||(r={})).auto="auto",e.start="start",e.center="center",e.end="end";var t=function(r,e,n,t){for(;r<=e;){var u=(r+e)/2|0,c=t(u);if(n<c)e=u-1;else{if(!(n>c))return u;r=u+1}}return 0<r?r-1:0},u=function(r){return"number"==typeof r&&!Number.isNaN(r)},c=function(){return"performance"in window?performance.now():Date.now()},i=function(r){var e=n.useRef(r);return e.current=r,e},o="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;exports.default=function(e){var a=e.itemCount,s=e.ssrItemCount,l=e.itemSize,f=void 0===l?50:l;l=e.horizontal;var v=e.resetScroll,d=e.overscanCount,h=void 0===d?1:d;d=e.useIsScrolling;var m=e.stickyIndices,g=e.scrollDuration;g=void 0===g?function(r){return Math.min(Math.max(.075*r,100),500)}:g;var S=e.scrollEasingFunction;S=void 0===S?function(r){return-(Math.cos(Math.PI*r)-1)/2}:S;var b=e.loadMoreCount,R=void 0===b?15:b;b=e.isItemLoaded;var p=e.loadMore,x=e.onScroll;e=e.onResize;var M=n.useState((function(){return function(r,e){void 0===e&&(e=0);var n=u(e)?[0,e-1]:e;e=n[1];var t=[];for(n=n[0];n<=e;n+=1)t.push({index:n,start:0,width:0,size:u(r)?r:r(n,0),measureRef:function(){return null}});return{items:t}}(f,s)})),w=M[0],z=M[1],C=n.useRef(!1),k=n.useRef(!0),I=n.useRef(!1),y=n.useRef(!1),A=n.useRef(new Map),F=n.useRef(0),O=n.useRef(-1),E=n.useRef(-1),L=n.useRef(null),T=n.useRef(null),q=n.useRef({width:0,height:0}),j=n.useRef([]),N=n.useRef(!0),D=n.useRef(),P=i(m),_=i(g),B=i(S),G=i(b),H=i(p),J=i(f),K=i(d),Q=i(x),U=i(e),V=l?"width":"height",W=l?"marginLeft":"marginTop",X=l?"scrollLeft":"scrollTop",Y=n.useCallback((function(r){var e=J.current;return u(e)?e:e(r,q.current.width)}),[J]),Z=n.useCallback((function(r,e){var n,t,u=null!=(n=null==(t=j.current[r-1])?void 0:t.end)?n:0;return{idx:r,start:u,end:u+e,size:e}}),[]),$=n.useCallback((function(r){void 0===r&&(r=!0),j.current.length=a;for(var e=0;e<a;e+=1)j.current[e]=Z(e,r&&j.current[e]?j.current[e].size:Y(e))}),[Y,Z,a]),rr=n.useCallback((function(r){var e=j.current,n=e.length-1,u=0;if(y.current)for(;u<n&&e[u].start+e[u].size<r;)u+=1;else u=t(0,n,r,(function(r){return e[r].start}));for(var c=u,i=e[c].start;c<n&&i<r+q.current[V];)i+=e[c].size,c+=1;c=c===n?c:c-1,r=Math.max(u-h,0),i=Math.min(c+h,n);var o=e[r].start;return{oStart:r,oStop:i,vStart:u,vStop:c,innerMargin:o,innerSize:(n=Math[i<n?"max":"min"](e[i].end+e[i].size,e[n].end))-o}}),[h,V]),er=n.useCallback((function(r,e){void 0===e&&(e=!0),L.current&&(N.current=!1,k.current=e,L.current[X]=r)}),[X]),nr=n.useCallback((function(r,e){var n=(r=u(r)?{offset:r}:r).offset;if(r=r.smooth,u(n))if(r){var t=F.current,i=c();D.current=requestAnimationFrame((function r(){var o=_.current;o=u(o)?o:o(Math.abs(n-t)),o=Math.min((c()-i)/o,1);var a=B.current(o);er(a*(n-t)+t),1>o?D.current=requestAnimationFrame(r):e&&e()}))}else er(n),e&&e()}),[_,B,er]),tr=n.useCallback((function(e,n,t){var c=u(e)?{index:e}:e,i=c.index,o=c.align;if(o=void 0===o?r.auto:o,c=c.smooth,u(i)){I.current=!0,y.current&&$();var a=j.current,s=a[Math.max(0,Math.min(i,a.length-1))];if(s){i=s.start;var l=s.end;s=s.size,a=a[a.length-1].end;var f=q.current[V],v=F.current;a<=f?n&&n():(t||o===r.start||o===r.auto&&v+f>l&&v>i?v=a-i<=f?a-f:i:o===r.end||o===r.auto&&v+f<l&&v<i?v=i+s<=f?0:i-f+s:o===r.center&&i+s/2>f/2&&(v=a-(o=i-f/2+s/2)<=f?a-f:o),y.current&&1>=Math.abs(v-F.current)?n&&n():nr({offset:v,smooth:c},(function(){y.current?t?requestAnimationFrame((function(){return tr(e,n,t)})):setTimeout((function(){return tr(e,n)})):n&&n()})))}}}),[$,nr,V]);l=n.useCallback((function(r,e){return tr(r,e)}),[tr]),e=n.useCallback((function(r,e){return tr(r,e,!0)}),[tr]),d=function(r,e){var t=n.useRef(),u=i(r),o=n.useCallback((function(){t.current&&(cancelAnimationFrame(t.current),t.current=void 0)}),[]),a=n.useCallback((function(r){c()-r>=e?u.current():t.current=requestAnimationFrame((function(){return a(r)}))}),[u,e]);return[n.useCallback((function(){o(),a(c())}),[o,a]),o]}((function(){return ir(F.current)}),150);var ur=d[0],cr=d[1],ir=n.useCallback((function(r,e,n){if(!H.current||C.current||G.current&&G.current(0)||H.current({startIndex:0,stopIndex:R-1,loadIndex:0,scrollOffset:r,userScroll:!1}),a){var u=rr(r),c=u.oStart,i=u.oStop,o=u.vStart,s=u.vStop,l=u.innerMargin,f=u.innerSize,v=[],d=Array.isArray(P.current)?P.current:[];u=function(t){var u=j.current,c=u[t],i=c.start,o=c.size;v.push({index:t,start:i-l,size:o,width:q.current.width,isScrolling:n||void 0,isSticky:d.includes(t)||void 0,measureRef:function(c){c&&new ResizeObserver((function(c,a){var s,l,f,v=(c=c[0].target).getBoundingClientRect()[V];if(v){var d=null!=(s=null==(l=u[t-1])?void 0:l.end)?s:0;v===o&&i===d||(t<O.current&&i<r&&er(r+v-o,!1),j.current[t]=Z(t,v),I.current||ir(F.current,e,n),y.current=!0),O.current=t,null==(f=A.current.get(c))||f.disconnect(),A.current.set(c,a)}else a.disconnect(),A.current.delete(c)})).observe(c)}})};for(var h=c;h<=i;h+=1)u(h);d.length&&(c>(u=d[t(0,d.length-1,o,(function(r){return d[r]}))])&&(h=j.current[u].size,v.unshift({index:u,start:0,size:h,width:q.current.width,isScrolling:n||void 0,isSticky:!0,measureRef:function(){return null}}),l-=h,f+=h)),z((function(r){return function(r,e,n){if(r.length!==e.length)return!0;for(var t=function(t){if(Object.keys(r[t]).some((function(u){return!n[u]&&r[t][u]!==e[t][u]})))return{v:!0}},u=0;u<r.length;u+=1){var c=t(u);if("object"==typeof c)return c.v}return!1}(r.items,v,{measureRef:!0})?{items:v,innerMargin:l,innerSize:f}:r})),e&&(u=r>F.current,Q.current&&Q.current({overscanStartIndex:c,overscanStopIndex:i,visibleStartIndex:o,visibleStopIndex:s,scrollOffset:r,scrollForward:u,userScroll:N.current}),i=(c=Math.max(Math.floor((s+1)/R)-(u?0:1),0))*R,!H.current||s===E.current||G.current&&G.current(c)||H.current({startIndex:i,stopIndex:i+R-1,loadIndex:c,scrollOffset:r,userScroll:N.current}),n&&ur(),E.current=s)}else z({items:[]})}),[P,rr,Z,a,R,H,Q,ur,er,V,G]);return function(r,e,n){var t=i(e);o((function(){if(null==r||!r.current)return function(){return null};var e=new ResizeObserver((function(r){r=r[0].contentRect,t.current({width:r.width,height:r.height})}));return e.observe(r.current),function(){return e.disconnect()}}),[t,r].concat(n))}(L,(function(r){var e,n=q.current,t=n.height;t=(n=n.width===r.width)&&t===r.height;var u=j.current.length,c=null==(e=j.current[u-1])?void 0:e.end;if(q.current=r,$(y.current),ir(F.current),v&&a!==u&&setTimeout((function(){return er(0,!1)})),C.current){var i;if(!y.current&&!n)e=null==(i=j.current[j.current.length-1])?void 0:i.end,er(F.current*(e/c||1),!1);!t&&U.current&&U.current(r)}else C.current=!0}),[a,v,ir,$,U,er]),o((function(){T.current&&(u(w.innerMargin)&&(T.current.style[W]=w.innerMargin+"px"),u(w.innerSize)&&(T.current.style[V]=w.innerSize+"px"))}),[W,V,w.innerMargin,w.innerSize]),o((function(){var r=L.current;if(!r)return function(){return null};var e=function(r){if((r=r.target[X])!==F.current){var e=K.current;e="function"==typeof e?e(Math.abs(r-F.current)):e,ir(r,k.current,e),N.current=!0,k.current=!0,I.current=!1,F.current=r}};r.addEventListener("scroll",e,{passive:!0});var n=A.current;return function(){cr(),D.current&&(cancelAnimationFrame(D.current),D.current=void 0),r.removeEventListener("scroll",e),n.forEach((function(r){return r.disconnect()})),n.clear()}}),[cr,ir,X,K]),{outerRef:L,innerRef:T,items:w.items,scrollTo:nr,scrollToItem:l,startItem:e}};
//# sourceMappingURL=index.cjs.production.min.js.map
